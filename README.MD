# HospitalGest - Sistema de Gerenciamento Hospitalar

## ğŸ“‹ Funcionalidades

### ğŸ¥ Portal MÃ©dico
* **Agenda MÃ©dica:** VisualizaÃ§Ã£o de plantÃµes, horÃ¡rios disponÃ­veis e gestÃ£o de slots de atendimento.
* **GestÃ£o de Consultas:** Acesso Ã  fila de espera do dia e histÃ³rico completo de atendimentos realizados.
* **ProntuÃ¡rio EletrÃ´nico:** Registro de queixas, diagnÃ³sticos e visualizaÃ§Ã£o do histÃ³rico clÃ­nico do paciente (consultas e exames anteriores).
* **PrescriÃ§Ã£o EletrÃ´nica:** EmissÃ£o de receitas com baixa automÃ¡tica no estoque da farmÃ¡cia.
* **SolicitaÃ§Ã£o de Exames:** Pedidos de exames laboratoriais/imagem e visualizaÃ§Ã£o de laudos/resultados.

### ğŸ‘©â€âš•ï¸ Posto de Enfermagem
* **Triagem e Agendamento:** MarcaÃ§Ã£o de novas consultas e realizaÃ§Ã£o de internaÃ§Ãµes.
* **Mapa de Leitos:** VisualizaÃ§Ã£o em tempo real da ocupaÃ§Ã£o dos quartos (Livre/Ocupado), tipos de leito (UTI, Enfermaria, etc.) e registro de altas.
* **GestÃ£o de Pacientes:** Cadastro completo com upload de foto, dados pessoais e histÃ³rico.
* **FarmÃ¡cia:** Consulta rÃ¡pida de disponibilidade de insumos e medicamentos.

### âš™ï¸ Painel Administrativo
* **GestÃ£o de Pessoas:** CRUD completo de MÃ©dicos e Enfermeiros com geraÃ§Ã£o automÃ¡tica de usuÃ¡rios de acesso.
* **Estoque e Fornecedores:** Controle de lotes, validade de medicamentos (com alertas de vencimento) e cadastro de fornecedores.
* **Financeiro e Auditoria:** RelatÃ³rios de faturamento mensal e logs de auditoria de alteraÃ§Ãµes salariais.
* **ConfiguraÃ§Ãµes:** Gerenciamento do catÃ¡logo de tipos de exames e infraestrutura hospitalar (quartos).

---

## ğŸ›  Tecnologias Utilizadas

* **Backend:** Python 3, Flask.
* **Frontend:** HTML5, CSS3, Bootstrap 5, JavaScript (Vanilla).
* **Banco de Dados:** MySQL 8.0.
* **Infraestrutura:** Docker, Docker Compose.

---

## ğŸ—„ï¸ Estrutura do Banco de Dados

O projeto cumpre os requisitos da disciplina de Banco de Dados, implementando:

### 1. Stored Procedures
* `SP_AgendarConsulta`: Valida a disponibilidade do mÃ©dico e da agenda antes de confirmar uma consulta.
* `SP_RealizarAltaPaciente`: Processa a alta hospitalar, registrando a data efetiva e liberando o leito.
* `SP_RegistrarResultadoExame`: Atualiza o status do exame e insere os resultados obtidos.

### 2. Triggers
* `TRG_AuditoriaSalario`: Monitora a tabela de MÃ©dicos e registra automaticamente qualquer alteraÃ§Ã£o salarial na tabela de Log.
* `TRG_ValidarAltaInternacao`: Garante a integridade dos dados impedindo que a data de alta seja anterior Ã  data de admissÃ£o.
* `TRG_SyncMedicoUsuario_Ativo`: Sincroniza o status de "ativo" entre a tabela de MÃ©dicos e a tabela de UsuÃ¡rios.
* `TRG_DeleteEnfermeiro_DeleteUsuario`: Remove automaticamente o usuÃ¡rio de acesso ao deletar um enfermeiro.

### 3. Views
* `V_FaturamentoMensal`: Consolida receitas provenientes de consultas e exames, agrupadas por mÃªs e ano.
* `V_HistoricoClinico`: Unifica consultas e exames em uma visÃ£o cronolÃ³gica Ãºnica para o prontuÃ¡rio do paciente.
* `V_QuartosStatus`: Mapeia a infraestrutura, cruzando dados de quartos, internaÃ§Ãµes ativas e pacientes para indicar ocupaÃ§Ã£o.

### 4. Dados BinÃ¡rios (BLOB)
* Armazenamento e recuperaÃ§Ã£o de fotos dos pacientes diretamente no banco de dados.

---


## ğŸš€ Como Executar

### PrÃ©-requisitos
* Python 3.x instalado.
* Docker e Docker Compose instalados.

## Passo 1: Subir o Banco de Dados
Utilize o Docker Compose para iniciar o container do MySQL jÃ¡ configurado com os scripts de inicializaÃ§Ã£o:

```bash
docker-compose up --build -d
```
## Passo 2: Configurar a AplicaÃ§Ã£o (Localmente)

```bash
python3 -m venv venv
```

```bash
source venv/bin/activate
```

## Instalar dependÃªncias
```bash
pip install -r requirements.txt
```

## Executar o projeto
```bash
python app.py
```

## Estrutura do Projeto

```
HospitalGest/
â”œâ”€â”€ app.py                  # Arquivo principal da aplicaÃ§Ã£o Flask
â”œâ”€â”€ config/                 # ConfiguraÃ§Ãµes de conexÃ£o (DB)
â”œâ”€â”€ database/               # Classe de conexÃ£o e Pool
â”œâ”€â”€ docker/                 # Scripts SQL de inicializaÃ§Ã£o e imagens
â”‚   â””â”€â”€ initdb/
â”‚       â”œâ”€â”€ 01_Script.sql       # CriaÃ§Ã£o das tabelas
â”‚       â”œâ”€â”€ 02_Views.sql        # Views
â”‚       â”œâ”€â”€ 03_Procedures.sql   # Stored Procedures
â”‚       â”œâ”€â”€ 04_Triggers.sql     # Triggers
â”‚       â”œâ”€â”€ 05_Populate.sql     # Dados iniciais (Seed)
â”‚       â””â”€â”€ fotos/              # Imagens para carga inicial
â”œâ”€â”€ repositores/            # Camada de Acesso a Dados (DAO/Repository)
â”œâ”€â”€ routes/                 # Rotas da API e Views (Controllers)
â”œâ”€â”€ services/               # Regras de NegÃ³cio
â”œâ”€â”€ static/                 # Arquivos estÃ¡ticos (CSS, JS)
â”œâ”€â”€ templates/              # Arquivos HTML (Jinja2)
â”œâ”€â”€ utils/                  # UtilitÃ¡rios (ex: gerador de senhas)
â”œâ”€â”€ docker-compose.yml      # OrquestraÃ§Ã£o dos containers
â””â”€â”€ requirements.txt        # DependÃªncias Python
```
