{% extends "base.html" %} {% block content %}
<div class="mb-5">
  <h1 class="h3 mb-1">Portal do Médico - Dr(a). {{ session['username'] }}</h1>
  <p class="text-muted">Área clínica e assistencial</p>
  <div id="medico-data" data-crm="{{ session['referencia_id'] }}"></div>
</div>

<div class="row g-4">
  <div class="col-lg-8">
    <div class="card border-0">
      <div class="card-header bg-white border-0 py-4">
        <h5 class="mb-0">
          <i class="bi bi-calendar-event me-2 text-primary"></i> Minha Agenda
        </h5>
      </div>
      <div class="card-body">
        <div id="agenda-container" class="text-center py-5 bg-light rounded">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Carregando...</span>
          </div>
          <p class="text-muted mt-3">Carregando sua agenda...</p>
        </div>
      </div>
    </div>

    <div class="card border-0 mt-4">
      <div class="card-header bg-white border-0 py-4">
        <h5 class="mb-0">
          <i class="bi bi-people me-2 text-primary"></i> Consultas Agendadas
        </h5>
      </div>
      <div class="card-body">
        <div id="consultas-container" class="text-center py-5 bg-light rounded">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Carregando...</span>
          </div>
          <p class="text-muted mt-3">Carregando consultas...</p>
        </div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="card border-0 mb-4">
      <div class="card-body">
        <h5 class="card-title mb-3">Buscar Paciente</h5>
        <p class="text-muted small mb-4">
          Acesse histórico, exames e prescreva medicamentos
        </p>
        <a href="/ui/pacientes" class="btn btn-outline-primary w-100 mb-3">
          <i class="bi bi-search me-2"></i> Buscar Paciente
        </a>
      </div>
    </div>

    <div class="card border-0">
      <div class="card-body">
        <h5 class="card-title mb-4">Ferramentas</h5>
        <div class="list-group list-group-flush">
          <a
            href="/ui/estoque"
            class="list-group-item list-group-item-action px-0 py-3"
          >
            <div class="d-flex justify-content-between align-items-center">
              <span>
                <i class="bi bi-capsule me-2 text-primary"></i> Medicamentos
              </span>
              <i class="bi bi-chevron-right text-muted"></i>
            </div>
          </a>
          <a
            href="/ui/exames"
            class="list-group-item list-group-item-action px-0 py-3"
          >
            <div class="d-flex justify-content-between align-items-center">
              <span>
                <i class="bi bi-file-earmark-medical me-2 text-primary"></i>
                Exames
              </span>
              <i class="bi bi-chevron-right text-muted"></i>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Solicitar Exame -->
<div class="modal fade" id="modalSolicitarExame" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Solicitar Exame</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="id_consulta_exame">
                <div class="mb-3">
                    <label class="form-label">Tipo de Exame</label>
                    <select class="form-select" id="tipo_exame_select">
                        <option value="">Carregando...</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmarSolicitacaoExame()">Solicitar</button>
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block scripts %}
<script src="/static/js/portal_medico.js"></script>
{% endblock %}
